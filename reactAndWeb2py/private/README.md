
## Web2py + Visual Studio Code + React + Typescript  



This is a **web2py** example application and **Visual Studio Code setup** that supports building and debugging a modern **React** style client interface using **Typescript** and **webpack**.  

- ***The react example can be chosen from the Examples Menu. There are other web2py, and api examples as well.***
- ***The admin user for the reactAndWeb2py app is already set up.  login as admin@example.com with password "password" ***
- The client source is written with Typescript and .tsx react files, and built with Babel and Webpack. 
- A Visual Studio Code workspace file is included in the application folder
    - prebuilt launch tasks and npm scripts
    - Some folders are marked hidden to make working with web2py in Visual Studio friendlier (settings, excludes).  
- Map files are generated so both python and javascript can be debugged at the same time in the same environment.
- Launch configurations exist to start the web2py server using the VSCode assigned python which can be directly debugged.
- Another Launch configuration will attach you to the chrome debugger from VSCode
- Map file generation is already set up to debug the Typescript source in the chrome debugger. 
- You can edit the server side files through the web2py admin interface or from VS Code  when using this setup locally. Both are editing the same file.- - There is an npm script that will start a live webpack dev server to allow live changes.
- Other npm scripts exist for building debug and release versions of the react source.

## To setup this project:
    - Make sure you have updated environment which includes:
        - python 3 latest version
        - npm (node package manager)
        - visual studio code 
            - Add Microsoft python extension. 
            - Add Typescript extensions as desired
        - Download web2py source and use that as your testbed folder.
            - You can download source from here: http://www.web2py.com/init/default/download if you don't already have it.
    - Download, unzip, and place this reactAndWeb2py application into the web2py applications folder (or load as an application in the admin interface)
    - Launch Visual Studio Code
    - open workspace> reactAndWeb2py.code-workspace which is inside applications/reactAndWeb2py
    - Several build tasks, and a debuggable python launch configuration, are already set up
    - run the "Install Node Modules"  task (Terminal>Run Task...) to install all node modules needed for building react and typescript.
        - This can be run manually from the top of the reactAndWeb2py folder as well.

## Running and debugging web2py python server
- Specify Python3.7 (or latest) as your runtime python in VSCode.
- Go to debug tab in VSCode
- Select the pre-configured task to run the web2py server 
- Click the run button.  
- You should be able to set up breakpoints in the python files in VSCode (not in the web2py debugger)
- Create a web2py password if you haven't already. You can hardcode this password into launch.json if you wish.
- First time you run the application you will need to add a user.
- open http://127.0.0.1:8000 if it doesn't automatically
- You can attach the VSCode debugger to a running instance of chrome  with the pre-configured launch task 

## Debugging typescript
- Map files are generated by running the dev build task.  Once generated you can run the interactive session task that's already created which will prompt you to attach to a running chrome session.

## Notes:
- A number of web2py, and other, folders are set to be hidden for a clean experience.  You can changed what's hidden by
changing the exclude settings of the workspace in VS Code
- Before packing up the web2py application to move to a server it would be wise to delete the node_modules folder (I don't know how to tell web2py not to pack everything)
- For real deployment you would want to remove the static/src folder.  It's needed for debugging as it contains the source and map files.